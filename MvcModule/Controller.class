<?php
class Controller extends Wire{
	public $vars = array();
	public $view_template = null;
	private $_view_path = null;

	public function __construct(){
	}

	public function set($var, $val){
		$this->vars[$var] = $val;
	}

	public function dump_vars(){
		print_r($this->vars);
	}

	public function set_view($name = null){
		if($name != null){
			$path = $this->whoAmI() . '/' . $name . '.view';
			if(file_exists($path)){
				echo 'success';
				$this->_view_path = $path;
			}else{
				echo 'error';
				return 'Error, view none existant in ' . $path ;
			}
		}
	}

	public function render_view($view = null){
		if($view != null){
			$this->set_view($view);
		}
		return $this->_render_view();
	}

	private function _render_view(){
		echo '_render_view';
		if (is_array($this->vars) && !empty($this->vars)) {
	        extract($this->vars);
	    }
	    ob_start();
	    include($this->_view_path);
	    return ob_get_clean();
	}

	public static function whoAmI(){
		return get_called_class();
	}
}